# 貢献ガイドライン

Anasuiプロジェクトへの貢献に興味をお持ちいただき、ありがとうございます！このドキュメントでは、開発への参加方法、コーディング規約、プルリクエストプロセスなどについて説明します。

## 開発環境のセットアップ

1. リポジトリをクローンします。
```bash
git clone https://your-repository-url/anasui.git
cd anasui
```

2. 依存関係をインストールします。
```bash
npm install
# または
yarn install
```

3. 開発サーバーを起動します。
```bash
npm run dev
# または
yarn dev
```

## ブランチ戦略

Anasuiでは以下のブランチ戦略を採用しています：

- `main` - 安定版のコード。本番環境にデプロイされるブランチ。
- `develop` - 開発中のコード。次のリリースに向けた機能が統合されるブランチ。
- `feature/*` - 新機能の開発用。例：`feature/add-playlist-support`
- `bugfix/*` - バグ修正用。例：`bugfix/fix-seek-issue`
- `release/*` - リリース準備用。バージョン番号を含める。例：`release/v1.2.0`

新機能やバグ修正に取り組む場合は、`develop`ブランチから新しいブランチを作成してください。

```bash
git checkout develop
git pull
git checkout -b feature/your-feature-name
```

## コーディング規約

### TypeScript / JavaScript

- [ESLintの構成](../eslint.config.mjs)に従ってください。
- コードフォーマットには[Prettier](https://prettier.io/)を使用します。
- 命名規則：
  - コンポーネント: `PascalCase`
  - 関数、変数: `camelCase`
  - 定数: `UPPER_CASE`
- 型定義は明示的に行ってください。`any`型の使用は最小限にとどめましょう。
- 非同期処理には`async/await`を優先的に使用してください。

### React

- 関数コンポーネントと React Hooks を使用してください。
- プロップスには適切な型定義を行ってください。
- 大きなコンポーネントは小さな再利用可能なコンポーネントに分割してください。
- ステート管理は適切に行い、不要なレンダリングを避けてください。

### CSS / スタイリング

- TailwindCSSのユーティリティクラスを優先的に使用してください。
- 複雑なスタイルや再利用可能なスタイルには、Emotionを使用してください。
- レスポンシブデザインに対応したスタイリングを心がけてください。

## テスト

新機能やバグ修正を追加する場合は、適切なテストを追加してください。

```bash
# テストの実行
npm run test
# または
yarn test
```

## コミットメッセージの規約

コミットメッセージは以下の形式で記述してください：

```
<type>(<scope>): <subject>

<body>

<footer>
```

### タイプ

- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響を与えない変更（空白、フォーマット、セミコロンの欠落など）
- `refactor`: バグ修正でも機能追加でもないコード変更
- `perf`: パフォーマンス向上のためのコード変更
- `test`: 不足しているテストの追加や既存のテストの修正
- `chore`: ビルドプロセスやツールの変更など

### 例

```
feat(player): シーク操作のパフォーマンス改善

シーク操作の実装を非同期処理に変更し、UIのレスポンスを向上させました。
また、シーク完了後の状態復元を最適化しました。

Closes #123
```

## プルリクエストプロセス

1. 作業が完了したら、変更をコミットし、リモートリポジトリにプッシュします。
```bash
git add .
git commit -m "feat: 機能の説明"
git push origin feature/your-feature-name
```

2. GitHub上でプルリクエストを作成します。
   - プルリクエストのタイトルと説明は明確に記述してください。
   - 関連するIssueがある場合は、プルリクエストの説明で言及してください。
   - 変更点の概要、テスト方法、注意点などを記載してください。

3. コードレビューを依頼します。
   - レビュアーはコードの品質、テスト、ドキュメントを確認します。
   - レビューコメントに対しては迅速に対応してください。

4. すべてのレビューが完了し、CI/CDパイプラインが成功したら、プルリクエストがマージされます。

## ニコニコ動画APIの扱い

ニコニコ動画のAPIは公式にドキュメント化されていない部分があります。APIとの連携に関する変更を行う場合は、以下の点に注意してください：

1. API呼び出しの変更は十分にテストしてください。
2. APIの動作が変更された場合のフォールバック処理を実装してください。
3. 発見した新しいAPI動作はドキュメントに追加してください。

## 問題の報告

バグや機能リクエストを報告する場合は、GitHub Issuesを使用してください。以下のテンプレートに従って報告すると、問題の解決が迅速に行われます：

### バグ報告

```
## 発生している問題
簡潔かつ明確に問題を説明してください。

## 再現手順
問題を再現するための手順：
1. '...' に移動
2. '....' をクリック
3. '....' までスクロール
4. エラーの確認

## 期待される動作
期待される動作を簡潔に説明してください。

## スクリーンショット
該当する場合、問題の理解に役立つスクリーンショットを追加してください。

## 環境
 - OS: [例: Windows 10, macOS 12.4]
 - ブラウザ: [例: Chrome 98, Safari 15.4]
 - Anasuiバージョン: [例: 0.1.0]

## 追加情報
問題についてのその他の情報をここに追加してください。
```

### 機能リクエスト

```
## 関連する問題
この機能リクエストは問題に関連していますか？簡潔に説明してください。

## 解決策の提案
実現したい解決策を明確かつ簡潔に説明してください。

## 代替案の検討
検討した代替ソリューションや機能について説明してください。

## 追加情報
この機能リクエストに関するその他の情報や screenshots を追加してください。
```

## コミュニティとコミュニケーション

- 質問や議論には GitHub Discussions を使用してください。
- 開発に関する質問や提案は Issues で行ってください。
- セキュリティ上の問題は、GitHub の Security タブを通じて非公開で報告してください。

## ライセンス

Anasuiプロジェクトへの貢献は、プロジェクトと同じMITライセンスの下で公開されます。あなたの貢献をプロジェクトに統合することで、あなたはその貢献がこのライセンスの下で公開されることに同意したものとみなされます。

---

ご協力ありがとうございます！Anasuiをより良いものにするための貢献に感謝します。
